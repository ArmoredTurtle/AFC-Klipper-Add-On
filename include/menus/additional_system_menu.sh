#!/usr/bin/env bash
# Armored Turtle Automated Filament Changer
#
# Copyright (C) 2024 Armored Turtle
#
# This file may be distributed under the terms of the GNU GPLv3 license.

additional_system_menu() {
  local message
  local choice
  local counter
  message="This menu allows you to add ADDITIONAL unit types. It should NOT be used for your first unit.\n"
  message+="This is a best effort in adding an additional unit. You will probably be required\n"
  message+="to manually edit the configuration files to ensure proper operation.\n"
  # Override the default boxturtle_name to prevent conflicts with the default name.
  boxturtle_name="Turtle_2"
  counter=0
  while true; do
    clear
    if [ "$installation_type" == "BoxTurtle (4-Lane)" ]; then
    printf "      \e[49m                                    \e[m
                          \e[49m                                    \e[m
                          \e[49m                                    \e[m
                          \e[49m                                    \e[m
       \e[38;5;231;48;5;16m╭───────────╮      \e[m \e[49m            \e[38;5;3;49m▄\e[38;5;101;49m▄▄▄\e[38;5;101;48;5;101m▄▄▄\e[38;5;101;48;5;243m▄\e[38;5;101;49m▄▄▄\e[38;5;65;49m▄\e[49m            \e[m
       \e[38;5;231;48;5;16m│ Mooaaarrr │      \e[m \e[49m         \e[38;5;65;49m▄▄\e[38;5;239;48;5;236m▄\e[38;5;238;48;5;240m▄\e[48;5;101m           \e[38;5;101;48;5;101m▄▄▄\e[38;5;101;49m▄\e[49m        \e[m
       \e[38;5;231;48;5;16m╰───────────╯      \e[m \e[49m       \e[38;5;101;49m▄\e[38;5;101;48;5;101m▄\e[38;5;241;48;5;101m▄\e[38;5;236;48;5;241m▄\e[38;5;239;48;5;236m▄\e[38;5;242;48;5;236m▄\e[38;5;239;48;5;238m▄\e[38;5;236;48;5;241m▄\e[38;5;237;48;5;101m▄\e[38;5;59;48;5;101m▄\e[48;5;101m           \e[38;5;239;48;5;242m▄\e[38;5;236;49m▄\e[49m      \e[m
                          \e[49m  \e[38;5;149;49m▄\e[38;5;149;48;5;149m▄▄▄\e[48;5;149m  \e[38;5;149;48;5;143m▄\e[38;5;149;48;5;239m▄\e[38;5;143;48;5;240m▄\e[38;5;101;48;5;101m▄\e[48;5;101m  \e[38;5;101;48;5;65m▄\e[38;5;101;48;5;59m▄\e[38;5;101;48;5;237m▄\e[38;5;59;48;5;237m▄\e[38;5;236;48;5;240m▄\e[38;5;237;48;5;101m▄\e[38;5;239;48;5;101m▄▄▄\e[38;5;238;48;5;101m▄\e[38;5;237;48;5;101m▄▄▄▄\e[38;5;236;48;5;237m▄\e[38;5;65;48;5;240m▄\e[38;5;65;48;5;242m▄\e[38;5;65;49m▄\e[49m    \e[m
                          \e[38;5;149;49m▄\e[38;5;149;48;5;149m▄▄\e[38;5;107;48;5;149m▄\e[38;5;149;48;5;149m▄\e[48;5;149m   \e[38;5;143;48;5;149m▄▄\e[48;5;149m \e[38;5;149;48;5;149m▄\e[38;5;143;48;5;101m▄\e[38;5;101;48;5;101m▄\e[48;5;101m    \e[38;5;101;48;5;242m▄\e[38;5;238;48;5;237m▄\e[38;5;239;48;5;236m▄\e[38;5;101;48;5;238m▄\e[38;5;101;48;5;239m▄▄▄▄▄▄\e[38;5;238;48;5;236m▄\e[38;5;237;48;5;242m▄\e[48;5;101m \e[38;5;101;48;5;101m▄\e[38;5;65;49m▄\e[49m   \e[m
                          \e[38;5;149;48;5;149m▄\e[48;5;149m \e[38;5;238;48;5;241m▄\e[48;5;236m \e[38;5;242;48;5;101m▄\e[48;5;149m  \e[38;5;101;48;5;101m▄\e[48;5;236m \e[38;5;236;48;5;239m▄\e[38;5;149;48;5;149m▄\e[48;5;149m  \e[38;5;149;48;5;107m▄\e[38;5;101;48;5;101m▄\e[48;5;101m    \e[38;5;238;48;5;238m▄\e[38;5;239;48;5;239m▄\e[48;5;101m       \e[38;5;101;48;5;242m▄\e[38;5;239;48;5;236m▄\e[38;5;237;48;5;241m▄\e[48;5;101m \e[38;5;65;48;5;101m▄\e[38;5;149;48;5;149m▄▄▄\e[m
                          \e[38;5;149;48;5;149m▄\e[48;5;149m \e[38;5;149;48;5;107m▄\e[38;5;149;48;5;242m▄\e[38;5;143;48;5;143m▄\e[48;5;149m  \e[38;5;149;48;5;143m▄\e[38;5;143;48;5;240m▄\e[38;5;149;48;5;101m▄\e[48;5;149m    \e[38;5;143;48;5;101m▄\e[38;5;237;48;5;65m▄\e[38;5;242;48;5;101m▄\e[48;5;101m  \e[38;5;237;48;5;237m▄\e[38;5;240;48;5;239m▄\e[48;5;101m        \e[38;5;101;48;5;242m▄\e[38;5;237;48;5;236m▄\e[38;5;236;48;5;241m▄\e[38;5;236;48;5;238m▄\e[38;5;101;48;5;143m▄\e[38;5;149;48;5;149m▄\e[49;38;5;149m▀\e[m
                          \e[38;5;149;48;5;149m▄\e[48;5;149m  \e[38;5;149;48;5;149m▄\e[38;5;143;48;5;239m▄\e[38;5;242;48;5;242m▄\e[38;5;240;48;5;241m▄\e[38;5;143;48;5;237m▄\e[38;5;149;48;5;107m▄\e[48;5;149m      \e[38;5;101;48;5;239m▄\e[38;5;237;48;5;237m▄\e[38;5;237;48;5;242m▄\e[38;5;65;48;5;101m▄\e[48;5;237m \e[38;5;240;48;5;240m▄\e[48;5;101m    \e[38;5;242;48;5;101m▄\e[38;5;240;48;5;101m▄\e[38;5;238;48;5;101m▄\e[38;5;236;48;5;242m▄\e[38;5;236;48;5;239m▄\e[38;5;59;48;5;236m▄\e[38;5;101;48;5;237m▄\e[38;5;101;48;5;242m▄\e[38;5;242;48;5;101m▄\e[49;38;5;149m▀\e[49m \e[m
                          \e[49;38;5;149m▀\e[38;5;149;48;5;149m▄\e[48;5;149m             \e[38;5;143;48;5;143m▄\e[38;5;101;48;5;242m▄\e[38;5;242;48;5;237m▄\e[38;5;240;48;5;236m▄\e[38;5;238;48;5;236m▄\e[38;5;237;48;5;238m▄\e[38;5;237;48;5;239m▄\e[38;5;238;48;5;239m▄\e[38;5;240;48;5;239m▄\e[38;5;242;48;5;237m▄\e[38;5;65;48;5;236m▄\e[38;5;101;48;5;236m▄\e[38;5;101;48;5;238m▄\e[38;5;101;48;5;241m▄\e[38;5;101;48;5;101m▄▄\e[38;5;143;48;5;101m▄\e[38;5;149;48;5;101m▄\e[38;5;149;49m▄\e[49m  \e[m
                          \e[49m  \e[49;38;5;149m▀\e[38;5;149;48;5;149m▄▄\e[48;5;149m          \e[38;5;149;48;5;143m▄\e[48;5;101m       \e[38;5;101;48;5;101m▄▄\e[38;5;107;48;5;101m▄\e[38;5;143;48;5;101m▄▄\e[38;5;149;48;5;101m▄\e[38;5;149;48;5;143m▄\e[38;5;149;48;5;149m▄\e[48;5;149m  \e[38;5;149;48;5;149m▄\e[49m  \e[m
                          \e[49m   \e[38;5;149;49m▄\e[48;5;149m \e[38;5;149;48;5;149m▄▄▄▄▄\e[48;5;149m    \e[38;5;149;48;5;149m▄▄▄▄▄▄▄▄▄\e[49;38;5;149m▀▀▀\e[49m  \e[38;5;149;48;5;149m▄\e[48;5;149m    \e[38;5;149;48;5;149m▄\e[49m  \e[m
                          \e[49m   \e[38;5;149;48;5;149m▄\e[48;5;149m     \e[38;5;149;48;5;149m▄\e[49m      \e[38;5;149;48;5;149m▄\e[48;5;149m     \e[38;5;149;48;5;149m▄\e[49m     \e[49;38;5;149m▀▀▀▀▀\e[49m   \e[m
                          \e[49m   \e[49;38;5;149m▀▀▀▀▀▀\e[49;38;5;185m▀\e[49m      \e[38;5;149;48;5;149m▄\e[48;5;149m    \e[38;5;149;48;5;149m▄▄\e[49m             \e[m
                          \e[49m                                    \e[m
";
printf "                                BoxTurtle by ArmoredTurtle\n"
    elif [ "$installation_type" == "NightOwl" ]; then
printf "
              \e[49m                \e[38;5;53;49m▄\e[38;5;53;48;5;53m▄\e[48;5;53m \e[49m                          \e[48;5;53m \e[38;5;53;48;5;53m▄\e[38;5;53;49m▄\e[49m                \e[m
              \e[49m                \e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[48;5;53m \e[38;5;53;49m▄\e[49m                      \e[38;5;53;49m▄\e[48;5;53m \e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[49m                \e[m
              \e[49m \e[48;5;53m \e[38;5;53;49m▄▄\e[49m            \e[48;5;53m \e[49m \e[38;5;53;49m▄\e[49;38;5;53m▀\e[48;5;53m \e[38;5;53;49m▄\e[49m                    \e[38;5;53;49m▄\e[48;5;53m \e[49;38;5;53m▀\e[38;5;53;49m▄\e[49m \e[48;5;53m \e[49m            \e[38;5;53;49m▄\e[38;5;53;49m▄\e[38;5;53;48;5;53m▄▄\e[m
              \e[49m \e[38;5;53;48;5;53m▄▄\e[49;38;5;53m▀\e[38;5;53;48;5;53m▄▄\e[38;5;53;49m▄▄\e[49m        \e[48;5;53m \e[38;5;53;49m▄\e[49m \e[49;38;5;53m▀\e[49m \e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄▄▄\e[49m            \e[38;5;53;49m▄▄▄\e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[49m \e[49;38;5;53m▀\e[49m \e[38;5;53;49m▄\e[38;5;53;48;5;53m▄\e[49m        \e[38;5;53;49m▄\e[38;5;53;49m▄\e[38;5;53;48;5;53m▄▄\e[49;38;5;53m▀\e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[m
              \e[49m \e[49;38;5;53m▀\e[48;5;53m \e[38;5;53;49m▄\e[49m  \e[49;38;5;53m▀▀\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄▄\e[38;5;53;49m▄\e[49m    \e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄▄\e[49m   \e[49;38;5;53m▀▀▀▀▀\e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄▄\e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[49;38;5;53m▀▀▀▀\e[49m   \e[38;5;53;49m▄▄\e[38;5;53;49m▄\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[49m    \e[38;5;53;49m▄\e[38;5;53;49m▄▄\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀▀\e[49m  \e[38;5;53;49m▄\e[38;5;53;48;5;53m▄▄\e[49m \e[m
              \e[49m   \e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄\e[49m    \e[49;38;5;53m▀\e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄\e[49m   \e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄\e[49m \e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄▄\e[49m      \e[49;38;5;53m▀▀\e[49m      \e[38;5;53;49m▄▄\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[49m \e[38;5;53;49m▄\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[49m   \e[38;5;53;49m▄\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀▀\e[49m    \e[38;5;53;49m▄\e[38;5;53;48;5;53m▄▄\e[49;38;5;53m▀\e[49m  \e[m
              \e[49m   \e[38;5;53;48;5;53m▄\e[48;5;53m \e[49;38;5;53m▀\e[38;5;53;48;5;53m▄▄\e[38;5;53;49m▄▄\e[49m   \e[38;5;53;48;5;53m▄▄\e[38;5;53;49m▄▄▄\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[49m \e[38;5;53;49m▄\e[49m  \e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄\e[38;5;53;49m▄\e[49m      \e[38;5;53;49m▄▄▄\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[49m  \e[38;5;53;49m▄\e[49m \e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄▄▄\e[38;5;53;48;5;53m▄▄\e[49m   \e[38;5;53;49m▄▄\e[38;5;53;48;5;53m▄▄\e[49;38;5;53m▀\e[38;5;53;48;5;53m▄▄\e[49m   \e[m
              \e[49m   \e[49;38;5;53m▀\e[48;5;53m \e[38;5;53;49m▄\e[49m   \e[49;38;5;53m▀\e[49;38;5;53m▀\e[49;38;5;53m▀\e[49m  \e[38;5;53;48;5;53m▄▄\e[49m \e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[49m \e[38;5;53;48;5;53m▄\e[48;5;53m \e[38;5;53;48;5;53m▄\e[38;5;53;49m▄▄\e[49m   \e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄\e[49m  \e[38;5;53;49m▄\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[49m   \e[38;5;53;49m▄▄\e[38;5;53;48;5;53m▄\e[48;5;53m \e[38;5;53;48;5;53m▄\e[38;5;53;49m▄\e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[49m \e[38;5;53;48;5;53m▄▄\e[49m  \e[38;5;53;49m▄\e[49;38;5;53m▀▀\e[49m   \e[38;5;53;49m▄\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[49m   \e[m
              \e[49m     \e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄▄▄\e[49m  \e[49;38;5;53m▀\e[49;38;5;53m▀\e[49m \e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[49m \e[38;5;53;48;5;53m▄\e[48;5;53m \e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[48;5;53m \e[38;5;53;48;5;53m▄\e[49m \e[38;5;53;49m▄\e[49m \e[49;38;5;53m▀\e[38;5;53;48;5;53m▄▄\e[49;38;5;53m▀\e[49m   \e[38;5;53;48;5;53m▄\e[48;5;53m \e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[38;5;53;48;5;53m▄▄\e[48;5;53m \e[38;5;53;48;5;53m▄\e[49m \e[48;5;53m \e[38;5;53;48;5;53m▄▄\e[49;38;5;53m▀▀\e[49;38;5;53m▀\e[49m  \e[38;5;53;49m▄▄▄\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[49;38;5;53m▀\e[49m    \e[m
              \e[49m      \e[48;5;53m \e[49;38;5;53m▀▀▀▀▀▀\e[38;5;53;49m▄\e[49m  \e[49;38;5;53m▀▀\e[49m \e[38;5;53;48;5;53m▄\e[48;5;53m \e[38;5;53;48;5;53m▄▄\e[49m  \e[49;38;5;53m▀\e[49;38;5;53m▀\e[49m \e[38;5;53;48;5;53m▄\e[38;5;53;49m▄\e[49m   \e[38;5;53;49m▄\e[49m \e[48;5;53m \e[49m \e[49;38;5;53m▀\e[49;38;5;53m▀\e[49m  \e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[48;5;53m  \e[49m \e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[49m \e[38;5;53;49m▄\e[38;5;53;49m▄\e[49m \e[49;38;5;53m▀▀▀▀\e[49;38;5;53m▀\e[38;5;53;48;5;53m▄▄\e[49m     \e[m
              \e[49m      \e[38;5;53;48;5;53m▄▄\e[38;5;53;49m▄\e[49m          \e[49;38;5;53m▀\e[48;5;53m  \e[38;5;53;48;5;53m▄▄\e[38;5;53;49m▄▄▄\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[49m \e[38;5;53;48;5;53m▄\e[48;5;53m \e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[49m \e[49;38;5;53m▀\e[48;5;53m \e[38;5;53;49m▄▄▄\e[38;5;53;48;5;53m▄▄▄\e[48;5;53m \e[49;38;5;53m▀\e[49m    \e[49;38;5;53m▀\e[49m      \e[38;5;53;49m▄\e[48;5;53m \e[49;38;5;53m▀\e[49m     \e[m
              \e[49m       \e[49;38;5;53m▀▀\e[38;5;53;48;5;53m▄▄\e[38;5;53;49m▄▄▄▄▄\e[49m     \e[49;38;5;53m▀\e[38;5;53;48;5;53m▄▄▄▄▄▄▄\e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[48;5;53m \e[38;5;53;48;5;53m▄▄\e[38;5;53;49m▄\e[48;5;53m \e[38;5;53;48;5;53m▄▄▄▄▄▄\e[49;38;5;53m▀\e[49m      \e[38;5;53;49m▄▄▄▄\e[38;5;53;48;5;53m▄▄\e[49;38;5;53m▀▀\e[49m       \e[m
              \e[49m        \e[49;38;5;53m▀\e[38;5;53;48;5;53m▄▄\e[49m    \e[49;38;5;53m▀\e[49m \e[49;38;5;53m▀\e[49m \e[48;5;53m \e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[49m  \e[49;38;5;53m▀▀▀▀\e[49m   \e[38;5;53;48;5;53m▄▄\e[49m   \e[49;38;5;53m▀▀▀▀\e[49m  \e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[48;5;53m \e[49m \e[49;38;5;53m▀\e[49;38;5;53m▀\e[49;38;5;53m▀\e[49m    \e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄▄\e[49m        \e[m
              \e[49m          \e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄\e[49m \e[49;38;5;53m▀\e[49m   \e[38;5;53;48;5;53m▄▄\e[49m  \e[38;5;53;49m▄\e[49m    \e[38;5;53;48;5;53m▄\e[49m      \e[38;5;53;48;5;53m▄\e[49m    \e[38;5;53;48;5;53m▄\e[49m  \e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[49m   \e[49;38;5;53m▀\e[49m  \e[38;5;53;48;5;53m▄▄▄\e[49;38;5;53m▀\e[49m         \e[m
              \e[49m            \e[49;38;5;53m▀▀\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄▄▄▄\e[49m \e[38;5;53;48;5;53m▄\e[49m  \e[48;5;53m \e[49m     \e[38;5;53;48;5;53m▄\e[38;5;53;49m▄\e[49m  \e[38;5;53;49m▄\e[38;5;53;48;5;53m▄\e[49m     \e[48;5;53m \e[49m  \e[38;5;53;48;5;53m▄\e[49m \e[38;5;53;49m▄▄▄▄\e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[49m            \e[m
              \e[49m                \e[49;38;5;53m▀\e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄\e[49m   \e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[49m     \e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[49m     \e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[49m  \e[49;38;5;53m▀\e[38;5;53;49m▄\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀▀\e[49m                \e[m
              \e[49m                   \e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄\e[38;5;53;49m▄\e[49m  \e[38;5;53;49m▄\e[49m            \e[38;5;53;49m▄\e[49;38;5;53m▀\e[49m  \e[38;5;53;49m▄\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[49m                   \e[m
              \e[49m                     \e[49;38;5;53m▀\e[38;5;53;48;5;53m▄▄\e[38;5;53;49m▄\e[49m \e[49;38;5;53m▀\e[49;38;5;53m▀\e[49m      \e[38;5;53;49m▄\e[49m \e[49;38;5;53m▀\e[49;38;5;53m▀\e[49m \e[38;5;53;49m▄\e[38;5;53;48;5;53m▄▄\e[49;38;5;53m▀\e[49m                     \e[m
              \e[49m                       \e[48;5;53m \e[38;5;53;48;5;53m▄\e[49m              \e[38;5;53;48;5;53m▄\e[48;5;53m \e[49m                       \e[m
              \e[49m                     \e[38;5;53;49m▄▄\e[38;5;53;48;5;53m▄▄▄▄\e[38;5;53;49m▄▄\e[49m \e[38;5;53;48;5;53m▄\e[38;5;53;49m▄▄\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄\e[49m \e[38;5;53;49m▄\e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄▄▄\e[38;5;53;49m▄▄\e[49m                     \e[m
              \e[49m                 \e[38;5;53;49m▄▄▄▄\e[38;5;53;48;5;53m▄\e[49m \e[38;5;53;48;5;53m▄\e[38;5;53;49m▄▄\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[38;5;53;49m▄\e[38;5;53;48;5;53m▄▄\e[49;38;5;53m▀▀\e[38;5;53;48;5;53m▄▄\e[38;5;53;49m▄\e[49;38;5;53m▀\e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄\e[38;5;53;48;5;53m▄\e[48;5;53m \e[38;5;53;49m▄▄▄\e[49m                 \e[m
              \e[49m                 \e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄▄\e[49;38;5;53m▀▀\e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[49;38;5;53m▀\e[48;5;53m \e[38;5;53;48;5;53m▄\e[49m \e[38;5;53;48;5;53m▄▄▄\e[49m  \e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[48;5;53m \e[49;38;5;53m▀▀\e[48;5;53m \e[49;38;5;53m▀▀\e[48;5;53m \e[49;38;5;53m▀\e[49m \e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[48;5;53m \e[49m                 \e[m
              \e[49m                \e[38;5;53;48;5;53m▄▄\e[38;5;53;49m▄▄▄\e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄▄\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄▄▄\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄▄▄▄\e[38;5;53;48;5;53m▄\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄▄\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄▄▄\e[38;5;53;48;5;53m▄\e[38;5;53;49m▄▄▄\e[48;5;53m \e[38;5;53;48;5;53m▄\e[49m                \e[m
              \e[49m                 \e[49;38;5;53m▀▀\e[49m     \e[49;38;5;53m▀▀▀\e[49m \e[49;38;5;53m▀▀▀\e[49m  \e[49;38;5;53m▀▀▀\e[49m \e[49;38;5;53m▀▀▀\e[49m     \e[49;38;5;53m▀▀▀\e[49m                \e[m
";
printf "                                    NightOwl by mjonuschat\n"
fi
    printf "%b▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄ \n" "$MENU_GREEN"
    printf "█%b                                    AFC Script Help      %b                            █\n" "$RESET" "$MENU_GREEN"
    printf "%b▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀%b \n" "$MENU_GREEN" "$RESET"
    printf "%b\n" "$message"
    printf "%b▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄ \n" "$MENU_GREEN"
    printf "█%b         Please review the following options to add an additional unit type%b          █\n" "$RESET" "$MENU_GREEN"
    printf "█%b           Type a number or letter and press Enter/Return to toggle choice%b           █\n" "$RESET" "$MENU_GREEN"
    printf "%b▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀%b \n" "$MENU_GREEN" "$RESET"
    if [ "$files_updated_or_installed" == "False" ]; then
      printf "T. Installation Type: %s \n" "$installation_type"
      if [ "$installation_type" == "BoxTurtle (4-Lane)" ] || [ "$installation_type" == "BoxTurtle (8-Lane)" ]; then
        if [ "$turtle_renamed" != "True" ]; then
          boxturtle_name="Turtle_2"
        fi
        printf "1. BoxTurtle Name: %s \n" "$boxturtle_name"
      elif [ "$installation_type" == "NightOwl" ]; then
        boxturtle_name="NightOwl_2"
        printf "1. NightOwl Name: %s \n" "$boxturtle_name"
      fi
    fi
    echo ""
    if [ "$files_updated_or_installed" == "False" ]; then
      printf "I. Install system with current selections\n"
    fi
    printf "M. Return to Main Menu\n"
    printf "Q. Quit\n"
    echo ""
    read -p "Enter your choice: " choice

    choice="${choice^^}"

    case $choice in
      T)
        # Increment the counter and reset if it exceeds the array length
        counter=$(( (counter + 1) % ${#installation_options[@]} ))

        # Set the installation type to the current option
        installation_type="${installation_options[$counter]}"

        # Update the message
        message="Installation Type: $installation_type"
        export message ;;
      1)
        name_additional_unit
        export message ;;
      Q) exit_afc_install ;;
      M) main_menu ;;
      I)
        verify_name_not_in_use ${boxturtle_name}
        if [ "$invalid_name" == "False" ]; then
          install_additional_unit
          message="${boxturtle_name} created successfully, please look over config file and update lane numbers."
          message+="\nAdditionally, please ensure any MCU connections are updated in the appropriate files (CANBus, serial, etc)"
          message+="\nThis is not a 100% turn-key solution and will require some manual configuration based on your specific setup."
          export message
        fi
        ;;
      *) echo "Invalid selection" ;;
    esac
  done
}
